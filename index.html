<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Portuguese Quiz (BR)</title>
  <style>
    /* General Styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 0;
      color: #333;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      padding: 40px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin-top: 30px;
    }

    h1, h2, h3 {
      text-align: center;
      color: #0056b3;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 10px;
    }

    h2 {
      font-size: 28px;
      color: #333;
    }

    h3 {
      font-size: 18px;
      color: #888;
    }

    ol {
      padding-left: 20px;
      margin-bottom: 30px;
    }

    li {
      list-style: none;
      margin-bottom: 20px;
      font-size: 16px;
      line-height: 1.5;
      color: #444;
    }

    input[type='text'] {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
      box-sizing: border-box;
      transition: border 0.3s ease;
    }

    input[type='text']:focus {
      outline: none;
      border-color: #007bff;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    button:focus {
      outline: none;
    }

    .flex-btn-group {
      display: flex;
      justify-content: flex-start;
      gap: 15px;
      margin: 5px 0;
    }

    .flex-btn-group button {
      display: inline-block;
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .flex-btn-group button:hover {
      background-color: #218838;
    }

    .flex-btn-group button:focus {
      outline: none;
    }

    .sentence {
      margin-top: 10px;
      font-style: italic;
      color: #6c757d;
    }

    .form-section {
      margin-bottom: 40px;
    }

    .download-btn {
      display: block;
      margin: 20px auto;
      padding: 12px 20px;
      font-size: 18px;
      background-color: #17a2b8;
      color: white;
      border: none;
      border-radius: 5px;
      text-align: center;
      cursor: pointer;
      width: 100%;
      max-width: 300px;
      transition: background-color 0.3s ease;
    }

    .download-btn:hover {
      background-color: #138496;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Portuguese Quiz (BR)</h1>
    <h3 id="date"></h3>
    <form id="homeworkForm"></form>
    <button id="downloadBtn" class="download-btn">Download My Answers</button>
  </div>

  <script>
    document.getElementById('date').textContent = `Date: ${new Date().toLocaleDateString()}`;

    const commonWords = ["amor", "tempo", "vida", "dia", "homem", "mulher", "casa", "trabalho", "mundo", "família", "noite", "amigo", "coração", "cidade", "palavra", "olhos", "história", "água", "música", "viagem", "escola", "criança", "caminho", "porta", "janela", "luz", "paz", "força", "alegria", "tristeza", "felicidade", "esperança", "medo", "guerra", "vento", "chuva", "sol", "céu", "terra", "fogo", "silêncio", "você", "sorriso", "livro", "carro"];
    const commonVerbs = ["ser", "estar", "ter", "fazer", "poder", "dizer", "ir", "ver", "dar", "saber", "querer", "chegar", "passar", "dever", "ficar", "deixar", "encontrar", "falar", "levar", "começar", "pensar", "andar", "voltar", "sentir", "trazer", "conhecer", "chamar", "viver", "olhar", "abrir", "escrever", "estudar", "comer", "beber", "dormir", "comprar", "vender", "ler", "correr", "brincar"];

    const vocabTemplates = [
      ["Translate to Portuguese: '{0}'", ["Good morning", "Thank you", "See you tomorrow", "Good night", "How are you?", "Goodbye"]],
      ["What is the opposite of '{0}' in Portuguese?", ["big", "happy", "easy", "clean", "hot", "strong", "slow"]],
      ["What is a synonym of '{0}' in Portuguese?", ["rápido", "feliz", "inteligente", "forte"]],
      ["Fill in the blank in Portuguese: 'Eu gosto de ______ todos os dias.'", ["comer", "estudar", "correr", "dormir"]],
      ["Use the Portuguese word '{0}' in a sentence.", shuffle(commonWords).slice(0, 10)],
      ["What does '{0}' mean in English?", shuffle(commonWords).slice(0, 10)]
    ];

    const verbTemplates = [
      ["What is the past tense of '{0}' for 'he/she' (ele/ela)?", "ele/ela"],
      ["Conjugate the verb '{0}' in the future tense for 'we' (nós).", "nós"],
      ["Conjugate '{0}' in the imperfect tense for 'we' (nós).", "nós"],
      ["What is the conditional form of '{0}' for 'I' (eu)?", "eu"],
      ["Form a sentence using '{0}' in present tense with 'ele/ela'.", "ele/ela"],
      ["Conjugate the verb '{0}' in the present tense for 'they' (eles/elas).", "eles/elas"],
      ["What is the future tense of '{0}' for 'he/she' (ele/ela)?", "ele/ela"],
      ["Conjugate the verb '{0}' in past tense for 'we' (nós).", "nós"],
      ["What is the imperfect tense of '{0}' for 'you' (você)?", "você"]
    ];

    const readingPairs = [
      ["Maria vai ao mercado todos os dias para comprar frutas e legumes frescos para sua família.", "What does Maria buy at the market every day?"],
      ["O sol estava brilhando e as crianças brincavam no parque enquanto os pais conversavam embaixo da árvore.", "What were the children doing at the park?"],
      ["Pedro gosta de ler livros de aventura à noite, mas durante o dia ele prefere jogar futebol com os amigos.", "What does Pedro prefer to do during the day?"],
      ["João e Ana foram ao cinema ontem para assistir a um filme que estava em cartaz há muito tempo. Eles gostaram muito.", "Where did João and Ana go yesterday?"],
      ["Ela adora cozinhar bolos e tortas para os amigos e a família, e sempre tenta novas receitas para surpreender a todos.", "What does she love doing?"],
      ["Durante o inverno, a cidade de Gramado fica coberta de neve, e muitas pessoas viajam de longe para ver esse espetáculo raro.", "What happens in Gramado during the winter?"],
      ["Na escola, os alunos estudam várias matérias, como matemática, português, ciências e história, para se prepararem para o futuro.", "What subjects do students study at school?"],
      ["O livro que estou lendo conta a história de uma jovem que viaja por diversos países da Europa em busca de aventuras e autoconhecimento.", "What is the book about?"],
      ["A natureza ao redor da nossa casa é muito bonita. Temos uma grande árvore no jardim, flores coloridas e um pequeno lago.", "What can be found in the garden around the house?"],
      ["A praia estava lotada de turistas no verão. Eles nadavam no mar, jogavam vôlei de praia e aproveitavam o calor do sol.", "What were the tourists doing at the beach?"]
    ];

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function toggleSentence(id) {
      const el = document.getElementById(id);
      el.style.display = el.style.display === 'none' ? 'block' : 'none';
    }

    function generateHomework() {
      window.speechSynthesis.cancel();
      const form = document.getElementById('homeworkForm');
      form.innerHTML = '';
      let count = 1;

      form.innerHTML += '<h2>Vocabulary</h2><ol>';
      let vocabQs = [];
      vocabTemplates.forEach(([template, words]) => {
        words.forEach(word => {
          vocabQs.push(template.replace('{0}', word));
        });
      });
      shuffle(vocabQs).slice(0, 5).forEach(q => {
        form.innerHTML += `<li>${q}<br><input type='text' data-question="${q}"></li>`;
      });
      form.innerHTML += '</ol>';

      form.innerHTML += '<h2>Verb Conjugation</h2><ol>';
      shuffle(verbTemplates).slice(0, 5).forEach(([template]) => {
        const verb = shuffle(commonVerbs)[0];
        const q = template.replace('{0}', verb);
        form.innerHTML += `<li>${q}<br><input type='text' data-question="${q}"></li>`;
      });
      form.innerHTML += '</ol>';

      form.innerHTML += '<h2>Reading</h2><ol>';
      shuffle(readingPairs).slice(0, 5).forEach(([sentence, question]) => {
        const q = `Read the sentence and answer in Portuguese: '<i>${sentence}</i>'<br>Question: ${question}`;
        form.innerHTML += `<li>${q}<br><input type='text' data-question="${q.replace(/<[^>]*>/g, '')}"></li>`;
      });
      form.innerHTML += '</ol>';

      form.innerHTML += '<h2>Listening</h2><ol>';
      shuffle(readingPairs).slice(0, 5).forEach(([sentence, question]) => {
        const sentenceId = 'sentence-' + Math.random().toString(36).substr(2, 9);
        const q = `Listen to the sentence and answer the question:<br><b>Question:</b> ${question}<br>`;

        form.innerHTML += `
          <li>
            ${q}
            <div class="flex-btn-group">
              <button type="button" onclick="speakText('${sentence}')">Play Audio</button>
              <button type="button" onclick="toggleSentence('${sentenceId}')">Show/Hide Sentence</button>
            </div>
            <div id="${sentenceId}" class="sentence" style="display:none;">${sentence}</div>
            <input type="text" data-question="${question}">
          </li>`;
      });
      form.innerHTML += '</ol>';
    }

    function speakText(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'pt-BR';  // Portuguese language code
      window.speechSynthesis.speak(utterance);
    }

    generateHomework();

    document.getElementById('downloadBtn').addEventListener('click', () => {
      let inputs = document.querySelectorAll('input');
      let answers = '';
      inputs.forEach((input, index) => {
        answers += `Pergunta ${index + 1}: ${input.getAttribute('data-question')}\nResposta: ${input.value}\n\n`;
      });
      let blob = new Blob([answers], { type: 'text/plain' });
      let link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'respostas_da_licao.txt';
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
  </script>
</body>
</html>
